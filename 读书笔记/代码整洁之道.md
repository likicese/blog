# 代码整洁之道

## 章节笔记

### 格式的重要性

1. 垂直格式
   1. 单文件内，代码行数约200~500行
   2. 向报纸学习，按照：`大纲、顶层、故事`的形式排列
   3. 内容要短小精悍
   4. 隔开（功能相差甚远）和靠近（关系密切的概念，理应靠近）
   5. 变量声明在顶部
   6. `调用者声明在被调用者之前`
2. 横向格式
   1. 45个字符宽度
   2. eg：a = b ; fun(a, b, c)
   3. 乘法不用空格隔开（存疑）
   4. 代码要对齐，善用缩进，空出一定的范围
3. 团队规则

### 对象和数据结构

1. 隐藏关乎抽象
2. <font color = red>对象和过程 </font>
   1. 面向对象难以添加函数
   2. 面向过程难以添加数据结构
3. 得墨忒定律：模块不应了解它所操作对象的内部情况
4. 隐藏内部结构，防止浏览不该知道的对象
5. 最精炼的数据结构：只有公共变量，没有函数

### 错误处理

1. 使用异常而非返回码
2. 测试驱动：Try-Catch-Finally
3. 可控异常的代价：违反开闭原则，加长了修改链
4. 特例模式：异常下降，放到对象
5. 别返回null，使用空数组代替
6. 别传null值、断言
7. 具备一定的可读性和强悍的稳固性

### 边界

1. 第三方代码
   1. 小心地使用边界接口，可以将其封入类中
   2. 例如，在类中确定使用的类型
   3. 引入第三方代码时：测试性学习
   4. 学习性测试：便于检测新版的兼容性
2. 另一种边界：隔离已知和未知，设定假接口
3. 整洁的边界：改动少，使用适配器模式